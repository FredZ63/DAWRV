# ATLAS - JUCE Plugin Project Setup Guide

## ğŸ¯ Building ATLAS as VST/AU Plugin

This guide walks through setting up the JUCE-based plugin version of ATLAS.

---

## ğŸ“‹ Prerequisites

### 1. Install JUCE Framework
```bash
# Download from: https://juce.com/download/
# Or clone from GitHub:
git clone https://github.com/juce-framework/JUCE.git ~/JUCE
```

### 2. Install Projucer
- Projucer comes with JUCE
- Launch: `~/JUCE/Projucer.app` (macOS) or `Projucer.exe` (Windows)

### 3. Platform-Specific Requirements

**macOS:**
```bash
# Install Xcode from App Store
xcode-select --install

# VST3 SDK (optional, JUCE includes it)
# Download from: https://www.steinberg.net/vst3sdk
```

**Windows:**
```bash
# Install Visual Studio 2022 Community Edition
# Include: C++ Desktop Development workload

# VST3 SDK (optional, JUCE includes it)
```

**Linux:**
```bash
sudo apt-get install build-essential
sudo apt-get install libasound2-dev libjack-jackd2-dev
sudo apt-get install libfreetype6-dev libx11-dev
sudo apt-get install libxinerama-dev libxrandr-dev
sudo apt-get install libxcursor-dev mesa-common-dev
```

---

## ğŸ—ï¸ Project Structure

```
atlas/plugin/
â”œâ”€â”€ ATLAS.jucer                    # JUCE project file
â”œâ”€â”€ Source/
â”‚   â”œâ”€â”€ PluginProcessor.h          # Audio processor
â”‚   â”œâ”€â”€ PluginProcessor.cpp
â”‚   â”œâ”€â”€ PluginEditor.h             # UI editor
â”‚   â”œâ”€â”€ PluginEditor.cpp
â”‚   â”œâ”€â”€ MidiManager.h              # MIDI handling
â”‚   â”œâ”€â”€ MidiManager.cpp
â”‚   â”œâ”€â”€ DatabaseManager.h          # SQLite database
â”‚   â”œâ”€â”€ DatabaseManager.cpp
â”‚   â””â”€â”€ WebView/
â”‚       â”œâ”€â”€ WebViewComponent.h     # Embedded browser
â”‚       â””â”€â”€ WebViewComponent.cpp
â”œâ”€â”€ Resources/
â”‚   â””â”€â”€ ui/                        # Web UI files (from shared/)
â”‚       â”œâ”€â”€ index.html
â”‚       â”œâ”€â”€ styles/
â”‚       â””â”€â”€ scripts/
â””â”€â”€ Builds/                        # Generated by Projucer
    â”œâ”€â”€ MacOSX/                    # Xcode project
    â”œâ”€â”€ VisualStudio2022/          # VS solution
    â””â”€â”€ LinuxMakefile/             # Makefile
```

---

## ğŸš€ Quick Start

### Step 1: Create JUCE Project

```bash
cd atlas/plugin
```

Open **Projucer** and create a new project:
- Template: **Audio Plug-In**
- Project Name: **ATLAS**
- Project Type: **VST3, AU, Standalone**

### Step 2: Configure Project Settings

In Projucer:

**Plugin Characteristics:**
- Plugin is a Synth: âŒ No
- Plugin MIDI Input: âœ… Yes
- Plugin MIDI Output: âœ… Yes
- MIDI Effect Plugin: âœ… Yes
- Plugin Editor: âœ… Yes

**Plugin Formats:**
- VST3: âœ…
- AU (macOS only): âœ…
- Standalone: âœ…
- VST (Legacy): â¬œ Optional

**Project Settings:**
- C++ Language Standard: C++17
- Plugin Manufacturer: Your Name/Company
- Plugin Code: `Atls` (4 characters)
- Plugin Channel Configurations: `{0, 0}`

### Step 3: Add Dependencies

In Projucer â†’ Modules:
- âœ… juce_audio_basics
- âœ… juce_audio_devices
- âœ… juce_audio_formats
- âœ… juce_audio_plugin_client
- âœ… juce_audio_processors
- âœ… juce_audio_utils
- âœ… juce_core
- âœ… juce_data_structures
- âœ… juce_events
- âœ… juce_graphics
- âœ… juce_gui_basics
- âœ… juce_gui_extra (for WebBrowser)

---

## ğŸ’» Basic Plugin Code

### PluginProcessor.h
```cpp
#pragma once
#include <JuceHeader.h>

class AtlasAudioProcessor : public juce::AudioProcessor
{
public:
    AtlasAudioProcessor();
    ~AtlasAudioProcessor() override;

    void prepareToPlay (double sampleRate, int samplesPerBlock) override;
    void releaseResources() override;
    void processBlock (juce::AudioBuffer<float>&, juce::MidiBuffer&) override;

    juce::AudioProcessorEditor* createEditor() override;
    bool hasEditor() const override { return true; }

    const juce::String getName() const override { return "ATLAS"; }
    
    // MIDI
    bool acceptsMidi() const override { return true; }
    bool producesMidi() const override { return true; }
    bool isMidiEffect() const override { return true; }
    
    // State
    void getStateInformation (juce::MemoryBlock& destData) override;
    void setStateInformation (const void* data, int sizeInBytes) override;

private:
    JUCE_DECLARE_NON_COPYABLE_WITH_LEAK_DETECTOR (AtlasAudioProcessor)
};
```

### PluginEditor.h
```cpp
#pragma once
#include <JuceHeader.h>
#include "PluginProcessor.h"

class AtlasAudioProcessorEditor : public juce::AudioProcessorEditor
{
public:
    AtlasAudioProcessorEditor (AtlasAudioProcessor&);
    ~AtlasAudioProcessorEditor() override;

    void paint (juce::Graphics&) override;
    void resized() override;

private:
    AtlasAudioProcessor& audioProcessor;
    
    // Web view for UI
    std::unique_ptr<juce::WebBrowserComponent> webView;
    
    JUCE_DECLARE_NON_COPYABLE_WITH_LEAK_DETECTOR (AtlasAudioProcessorEditor)
};
```

---

## ğŸ”¨ Build Instructions

### macOS (Xcode)
```bash
# Generate Xcode project
# In Projucer: File â†’ Save Project (Cmd+S)

# Open generated project
cd Builds/MacOSX
open ATLAS.xcodeproj

# Build in Xcode:
# 1. Select scheme: ATLAS - AU/VST3
# 2. Product â†’ Build (Cmd+B)
# 3. Built plugins appear in ~/Library/Audio/Plug-Ins/
```

### Windows (Visual Studio)
```bash
# Generate VS solution
# In Projucer: File â†’ Save Project

# Open generated solution
cd Builds\VisualStudio2022
start ATLAS.sln

# Build in Visual Studio:
# 1. Select configuration: Release x64
# 2. Build â†’ Build Solution (Ctrl+Shift+B)
# 3. Built plugins appear in C:\Program Files\Common Files\VST3\
```

### Linux (Makefile)
```bash
# Generate Makefile
# In Projucer: File â†’ Save Project

# Build
cd Builds/LinuxMakefile
make CONFIG=Release

# Install
sudo cp build/ATLAS.vst3 /usr/lib/vst3/
```

---

## ğŸ¨ Embedding Web UI

### Option 1: JUCE WebBrowserComponent (Recommended)
```cpp
// In PluginEditor.cpp
AtlasAudioProcessorEditor::AtlasAudioProcessorEditor (AtlasAudioProcessor& p)
    : AudioProcessorEditor (&p), audioProcessor (p)
{
    // Create web view
    webView = std::make_unique<juce::WebBrowserComponent>();
    addAndMakeVisible (webView.get());
    
    // Load local HTML file
    juce::File htmlFile = juce::File::getSpecialLocation(
        juce::File::currentApplicationFile)
        .getChildFile("Contents/Resources/ui/index.html");
    
    webView->goToURL(htmlFile.getFullPathName());
    
    setSize (1200, 800);
}
```

### Option 2: Platform-Specific WebView
- **macOS**: WKWebView (better performance)
- **Windows**: WebView2 (modern Edge engine)
- **Linux**: WebKit GTK

---

## ğŸ§ª Testing in DAWs

### Test Locations

**macOS:**
```bash
# AU plugins
~/Library/Audio/Plug-Ins/Components/ATLAS.component

# VST3 plugins
~/Library/Audio/Plug-Ins/VST3/ATLAS.vst3

# Test in:
- REAPER
- Logic Pro
- Ableton Live
- FL Studio
```

**Windows:**
```bash
# VST3 plugins
C:\Program Files\Common Files\VST3\ATLAS.vst3

# Test in:
- REAPER
- Ableton Live
- FL Studio
- Cubase
```

---

## ğŸ“¦ Distribution

### Code Signing (Required for macOS)

```bash
# Get Developer ID certificate from Apple
# Sign plugin
codesign --deep --force --verify --verbose \
  --sign "Developer ID Application: Your Name" \
  ~/Library/Audio/Plug-Ins/Components/ATLAS.component

# Verify
codesign --verify --verbose ~/Library/Audio/Plug-Ins/Components/ATLAS.component
```

### Notarization (macOS)
```bash
# Package for notarization
ditto -c -k --keepParent ATLAS.component ATLAS.component.zip

# Submit to Apple
xcrun notarytool submit ATLAS.component.zip \
  --apple-id your@email.com \
  --team-id TEAMID \
  --password app-specific-password

# Staple notarization
xcrun stapler staple ATLAS.component
```

### Installer Creation
- **macOS**: Create .pkg with pkgbuild
- **Windows**: Use Inno Setup or NSIS
- **Linux**: Create .deb or .AppImage

---

## ğŸ› Debugging

### Attach Debugger to DAW

**Xcode:**
1. Debug â†’ Attach to Process
2. Select your DAW (e.g., "REAPER")
3. Set breakpoints in plugin code

**Visual Studio:**
1. Debug â†’ Attach to Process
2. Select your DAW executable
3. Set breakpoints in plugin code

### Logging
```cpp
// Add to PluginProcessor.cpp
DBG("ATLAS: Plugin initialized");
DBG("ATLAS: MIDI message received: " + message.getDescription());
```

---

## ğŸ“š Resources

- [JUCE Documentation](https://docs.juce.com/)
- [JUCE Forum](https://forum.juce.com/)
- [VST3 SDK Documentation](https://steinbergmedia.github.io/vst3_doc/)
- [Audio Unit Programming Guide](https://developer.apple.com/documentation/audiounit)

---

## ğŸ¯ Next Steps

1. âœ… Create basic JUCE project
2. â¬œ Implement MIDI I/O
3. â¬œ Port database logic to C++
4. â¬œ Embed web UI
5. â¬œ Test in multiple DAWs
6. â¬œ Add automation parameters
7. â¬œ Implement project state saving
8. â¬œ Create installers

---

**Ready to build ATLAS as a VST/AU plugin! ğŸµ**
